# Template for Creating a Project with uv and nbdev Capabilities


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Fast Python Packaging and Project Management with uv

In the context of software, `uv` is an extremely fast Python package and
project manager developed by Astral. It is designed to replace multiple
tools in the Python ecosystem, including pip, poetry, pyenv, and
virtualenv. [More info](https://docs.astral.sh/uv/)

Why it is good to use:

- **Blazing Speed:** Written in Rust, it is often 10–100x faster than
  pip. It uses a global cache to avoid redownloading packages you’ve
  used before.

- **All-in-One Tool:** It replaces several tools at once:

  - **pip:** Installing packages.

  - **pyenv:** Installing and switching between Python versions.

  - **virtualenv:** Managing isolated environments.

  - **pipx:** Running Python-based CLI tools (like ruff or black) in
    temporary environments.

- **Universal Lockfile:** It creates a uv.lock file, ensuring that every
  person on your team installs the exact same version of every
  dependency, making your code reproducible.

- **No Python Required:** You can install uv as a standalone binary; it
  can even download and install Python for you if you don’t have it.

<!-- The following is a markdown table -->

| Task                     | Command                |
|--------------------------|------------------------|
| Initialize a new project | uv init                |
| Add a package            | uv add <package-name>  |
| Run a script/command     | uv run \<file.py\>     |
| Install a Python version | uv python install 3.12 |
| Run a tool (pipx style)  | uvx <tool-name>        |

Run `uv init my_project`, to create a folder for your project or go to
your project folder and run `uv init` to initiate that folder as a uv
project. This command creates:

- `.git`  
- `.gitignore`  
- `main.py`  
- `pyproject.toml`  
- `python-version`  
- `README.md`

And once it had the pyproject.toml file, it lets you add dependencies
with `uv add <package-name>`.

### Install nbdev

Once we have the `uv` project initialized, we can proceed to install
nbdev.

``` sh
uv add nbdev
```

This will add a local version of nbdev to your project, and you can
start using it to create notebooks that will be converted into modules
for your package. Since it is the first dependency added to the project,
it will create: + `uv.lock` (lock file for uv) + `.venv` (folder with
the virtual environment for the project)

At this stage we want to convert the uv project into a nbdev project
with `nbdev_new`. This command will create a more curated
`pyproject.toml`, so we can first remove the `pyproject.toml` created by
`uv init`.

``` sh
rm pyproject.toml
```

\*\* NOTE \*\*  
nbdev-new will require certain arguments that it obtains from your git
config. If you have cloned this repo you will have already the remote
from which nbdev obtains the `repo` that contains, `branch` and `user`.
The other arguments are from your `git config --user.name` and
`git config --user.email`. You can set those with the following
commands:

``` sh
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

If you want to pass those arguments directly to nbdev-new,

``` sh
uv run nbdev-new --user git-MrFoo  --author Foo --author_email foo_bar@example.com
```

We use `uv run` to execute nbdev-new because it is installed in the
virtual environment of the project. This will create the nbdev structure
in the project, and you can start creating notebooks in the `nbs` folder
that will be converted into modules for your package.

The pyproject.toml has been updated and it will look like this:

``` toml
[build-system]
requires = ["setuptools>=64"]
build-backend = "setuptools.build_meta"

[project]
name = "my_project"
dynamic = ["version"]
description = ""
readme = "README.md"
requires-python = ">=3.10"
license = {text = "Apache-2.0"}
authors = [{name = "Foo", email = "foo_bar@example.com"}]
keywords = ['nbdev']
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3 :: Only",
]
dependencies = []

[project.urls]
Repository = "https://github.com/git-MrFoo/my_project"
Documentation = "https://git-MrFoo.github.io/my_project/"

[project.entry-points.nbdev]
my_project = "my_project._modidx:d"

[tool.setuptools.dynamic]
version = {attr = "my_project.__version__"}

[tool.setuptools.packages.find]
include = ["my_project"]

[tool.nbdev]
```

## Use of the template.

Go to my GitHub repo
[template_uv_nbdev3](https://github.com/Ramon-PR/template_uv_nbdev3) And
click the green button “Use this template” and choose “Create a new
repository” to create your own repository with the same structure as
this one. Then you can clone that repository to your local machine and
start working on it.

The repo contains this `README.md` and one bash file in the `scripts/` folder, `prepare_project.bash`, with the
previous steps to create a project with `uv` and `nbdev` capabilities. You
can run that bash file to prepare your project, or you can follow the
steps manually.

From the project root:
``` sh
bash scripts/prepare_project.bash
```
or from the scripts folder:
``` sh
bash prepare_project.bash
```

